###
### Quickness Settings
###

# This should allow for quick sourcing of formulas
export Q=$QUICKNESS/formulas

export QUICKNESS_BIN=$QUICKNESS/bin
export QUICKNESS_ETC=$QUICKNESS/etc
export QUICKNESS_PRIVATE=$QUICKNESS_ETC/private
export QUICKNESS_TWEAKS=$QUICKNESS/tweaks

export QUICKNESS_HOME=$HOME/.quickness
export QUICKNESS_SRC=$HOME/.quickness/src

export QUICKNESS_INSTALLED=$QUICKNESS_HOME/.installed
export QUICKNESS_MSG=/tmp/quickness.msg


###
### Quickness Workspaces
###

if [ ! -d $QUICKNESS_HOME ]; then
    mkdir $QUICKNESS_HOME
fi
if [ ! -d $QUICKNESS_SRC ]; then
    mkdir $QUICKNESS_SRC
fi


###
### Various methods to accumalate messages and keep track of what's been installed
###

if [ -f $QUICKNESS_MSG ]; then
    rm $QUICKNESS_MSG
fi

if [ ! -f $QUICKNESS_INSTALLED ]; then
    echo "#ONLY REMOVE THINGS FROM HERE YOU WANT TO TRY AND REINSTALL" >> $QUICKNESS_INSTALLED
fi

is_formula_installed() {
    if [ ! -z "$(grep ${BASH_SOURCE[1]##*/} $QUICKNESS_INSTALLED)" ]; then
        quickness_msg "ALERT: ${BASH_SOURCE[1]##*/} already installed, skipping over"
        echo "yes"
    else
        echo "no"
    fi
}

quickness_teardown() {
    echo "${BASH_SOURCE[1]##*/}" >> $QUICKNESS_INSTALLED
    if [ "${#BASH_SOURCE[@]}" = "2" ]; then
        echo "" >> $QUICKNESS_MSG
        cat $QUICKNESS_MSG
        rm $QUICKNESS_MSG
    fi
}

quickness_msg() {
    if [ ! -f $QUICKNESS_MSG ]; then
        echo "" >> $QUICKNESS_MSG
    fi
    echo "[${BASH_SOURCE[1]##*/}] $1" >> $QUICKNESS_MSG
    echo "" >> $QUICKNESS_MSG
}


###
### Path
###

export PATH=$QUICKNESS_BIN:$PATH
