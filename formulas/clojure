###
### Clojure
###

###
### Initialize
###

if [ "$(is_formula_installed)" = "yes" ]; then
    quickness_teardown
    return
fi

CLOJURE_VERSION_NUM="1.4.0"
CLOJURE_VERSION="clojure-$CLOJURE_VERSION_NUM"
CLOJURE_PREV_DIR=$PWD
cd $QUICKNESS_SRC


###
### Dependencies
###

. $Q/java


###
### Installation
###

if [ -d $CLOJURE_VERSION ]; then
    rm -rf $CLOJURE_VERSION
fi
if [ -d $CLOJURE_VERSION.zip ]; then
    rm -rf $CLOJURE_VERSION.zip
fi

curl http://repo1.maven.org/maven2/org/clojure/clojure/$CLOJURE_VERSION_NUM/$CLOJURE_VERSION.zip > $CLOJURE_VERSION.zip
unzip $CLOJURE_VERSION
echo "java -cp $QUICKNESS_SRC/$CLOJURE_VERSION/ clojure.main" > $QUICKNESS_BIN/clj
chmod 755 $QUICKNESS_BIN/clj


###
### Teardown
###

cd $CLOJURE_PREV_DIR
unset CLOJURE_VERSION_NUM
unset CLOJURE_VERSION
unset CLOJURE_PREV_DIR

quickness_teardown
