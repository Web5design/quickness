###
### golang
###

GO_PREV_DIR=$PWD

sudo apt-get -y install \
    golang

cd $HOME
mkdir ext
mkdir -p mygo/{bin,src}
export GOPATH="$HOME/ext:$HOME/mygo"
go get github.com/nsf/gocode

if [ -d "$HOME/.vim/bundle" ] ; then
    cd $HOME/.vim/bundle
    git clone https://github.com/jnwhiteh/vim-golang.git
    ln -s $HOME/ext/src/github.com/nsf/gocode/vim gocode
    cd $HOME
fi

echo '
### golang
if [ -d "$HOME/ext/bin" ] ; then
    GOPATH="$HOME/ext:$HOME/mygo"
    PATH="$HOME/ext/bin:$HOME/mygo/bin:$PATH"
fi' >> $HOME/.profile

export GOPATH="$HOME/ext:$HOME/mygo"
export PATH="$HOME/ext/bin:$HOME/mygo/bin:$PATH"

cd $GO_PREV_DIR
