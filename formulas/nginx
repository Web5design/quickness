###
### nginx
###

###
### Initialize
###

if [ "$(is_formula_installed)" = "yes" ]; then
    quickness_teardown
    return
fi

APP_VERSION=nginx-1.3.0
NGINX_PREV_DIR=$PWD
cd $QUICKNESS_SRC


###
### Dependencies
###

. $Q/evented_libs
. $Q/pcre


###
### Installation
###

if [ -d nginx ]; then
    rm -rf ./nginx
fi
if [ ! -f $APP_VERSION.tar.gz ]; then
    wget http://nginx.org/download/$APP_VERSION.tar.gz
fi

tar zxf $APP_VERSION.tar.gz
cd $APP_VERSION
./configure --with-http_ssl_module
make && sudo make install

sudo ln -s /usr/local/nginx/sbin/nginx /usr/local/bin/


###
### Teardown
###

cd $NGINX_PREV_DIR

quickness_msg "Server: sudo nginx"

quickness_teardown
