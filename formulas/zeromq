###
### ZeroMQ
###
### As of the release of precise pangolin ZeroMQ is fairly old, if you
### want to just install the the version packaged with ubuntu add a
### [zeromq] section to /etc/private/versions.conf with the option
### 'package: ubuntu'
###

###
### Initialize
###

is_formula_installed && return || formula_init

cd $QUICKNESS_SRC


###
### Dependencies
###

if [ "$ZEROMQ_PACKAGE" != "ubuntu" ]; then
    sudo apt-get -y install \
        libtool \
        uuid-dev
fi


###
### Installation
###

if [ "$ZEROMQ_PACKAGE" = "ubuntu" ]; then
    sudo apt-get -y install libzmq-dev

else
    if [ -d $ZEROMQ_DIRNAME ]; then
        rm -rf $ZEROMQ_DIRNAME
    fi
    if [ ! -f $ZEROMQ_FILENAME ]; then
        wget $ZEROMQ_URL
    fi

    tar zxf $ZEROMQ_FILENAME
    cd $ZEROMQ_DIRNAME
    ./configure && make && sudo make install
    sudo ldconfig
fi


###
### Teardown
###

formula_teardown
